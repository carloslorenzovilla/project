<!-- templates/recommendations.html -->
{% extends "base.html" %}
{% block content %}

<div class='jumbotron'>
    <h1>Get Your Next Recommendation!</h1>
</div>

<div class='container'>
    <form method="POST" action="" enctype="multipart/form-data">

        {{form.hidden_tag()}}

        <div class='form-group'>
            {{form.zone.label(class='form-group')}}
            {{form.zone(class='form-control')}}
        </div>

        <div class='form-group'>
            {{form.loc.label(class='form-group')}}
            {{form.loc(class='form-control')}}
        </div>

        <div class='form-group'>
            {{form.submit(class='btn btn-primary')}}
        </div>
    </form>

<script>
        let zone_select = document.getElementById('zone');
            let loc_select = document.getElementById('loc');

            zone_select.onchange = function () {
                zone = zone_select.value;

                fetch('/loc/' + zone).then(function (response) {

                    response.json().then(function (data) {
                        let optionHTML = '';

                        for (let loc of data.locs) {
                            optionHTML += '<option value="' + loc.id + '">' + loc.name + '</option>';
                        }

                        loc_select.innerHTML = optionHTML;
                    });
                });
            }
</script>

{% endblock %}


